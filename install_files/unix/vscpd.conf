<?xml version = "1.0" encoding = "UTF-8" ?>

<!--
  2019-12-17
  Example configuration file Unix
  Ake Hedman, akhe@grodansparadis.com
  https://www.grodansparadis.com
  Documentation for this configuration file is available
  here https://docs.vscp.org/vscpd/14.0/#/configuring_the_vscp_daemon
-->

<vscpconfig>

    <!--
      clientbuffersize is the default buffer size (number of events) for all
      clients in the system. Everything from a driver to a TCP/IP
      user is regarded as a client. Default is 1024.

      runasuser is the user the VSCP daemon runs as. Default is "vscp"

      GUID for daemon
      All nills, "-" or not set and the mac addess or the
      IP address of the computer will be used to calculate
      the GUID for the daemon
      Apply for your own GUID series at guid@vscp.org

      servername is a user name for the daemon whcih it use to greet users with.
    -->
    <general clientbuffersize="1024"
             runasuser="vscp"
             guid="FF:FF:FF:FF:FF:FF:FF:F5:00:00:00:00:00:00:00:01"
             servername="The VSCP daemon" 
    />

    <!--
          This is the admin credentials
          admin - Name for admin account.
          password  - Password for admin account. 
                      Generate with vscp-mkpasswd
          vscptoken - Token used for encryption
          pathtokey - Path to key used for encryption. If path is
                      empty or the file is not available a default key will be 
                      used (NOT recommended in production). 
    -->
    <security admin="admin" 
        password="450ADCE88F2FDBB20F3318B65E53CA4A;06D3311CC2195E80BE4F8EB12931BFEB5C630F6B154B2D644ABE29CEBDBFB545"
        allowfrom=""
        vscptoken="Carpe diem quam minimum credula postero"
        pathtokey="/etc/vscp/certs/key.txt"
    />


    <!--
        You can open TCP/IP interfaces on several ports or on
        on a specific port or on every interface of the computer
        Default 9598 will listen on all interfaces while
        "127.0.0.1:9598" only will listen on the specified interface.
        To specify several interfaces just enter them with a space
        between them.
        
        enable     - Set to true to enable interface
        interface  - Set port and interface to listen on as a comma
                     separated list.
        encryption - Set AES encryption for interface. aes128, ase192, 
                     aes256 are valid values.
    -->
    <tcpip enable="true"
        interface="9598"
        encryption="aes256"
        ssl_certificate="/etc/vscp/certs/tcpip.pem"
        ssl_certificate_chain=""
        ssl_verify_peer="false"
        ssl_ca_path=""
        ssl_ca_file=""
        ssl_verify_depth="9"
        ssl_default_verify_paths="true"
        ssl_cipher_list="DES-CBC3-SHA:AES128-SHA:AES128-GCM-SHA256"
        ssl_protocol_version="3"
        ssl_short_trust="false"
     />

    <!--
      Settings for the internal webserver.

      enable - Set to true to enable webserver functionality.
      document_root - Path to the document root of the web-server.
      listening_ports - Comma separated list of addres:port that the 
        web-server should listen on. 'r' after port is redirect
        to secure port. 's' after port marks as secure channel.
      index_files - A comma separate list of files that should be 
        teated as index files.
      authentication_domain - Domain used for authentication
      enable_auth_domain_check - Authentication domain  will be 
        checked if set to true.
      ssl_certificate - Path to SSL certificat PEM-file. 
      ssl_certificate_chain -
      ssl_verify_peer - 
      ssl_ca_path - 
      ssl_ca_file - 
      ssl_verify_depth -
      ssl_default_verify_paths -
      ssl_cipher_list - 
      ssl_protocol_version -
      ssl_short_trust -
      cgi_interpreter - 
      cgi_patterns - 
      cgi_environment - 
      cgi_environment -
      protect_uri -
      trottle -
      enable_directory_listing - 
      enable_keep_alive -
      keep_alive_timeout_ms -
      access_control_list -
      extra_mime_types -
      num_threads - 
      run_as_user - 
      url_rewrite_patterns - 
      hilde_file_patterns - 
      request_timeout_ms - 
      linger_timeout_ms - 
      decode_url - 
      global_auth_file - 
      per_directory_auth_file - 
      ssi_patterns - 
      access_control_allow_origin - 
      access_control_allow_methods - 
      access_control_allow_headers - 
      error_pages - 
      tcp_nodelay - 
      static_file_max_age - 
      strict_transport_security_max_age - 
      allow_sendfile_call - 
      additional_header - 
      max_request_size - 
      allow_index_script_resource - 
      duktape_script_patterns - 
      lua_preload_file - 
      lua_script_patterns - 
      lua_server_page_patterns - 
      lua_websocket_patterns - 
      lua_background_script - 
      lua_background_script_params - 
    -->

    <webserver enable="true"
        document_root="/var/lib/vscp/vscpd/web"
        listening_ports="[::]:8888r,[::]:8843s,8884"
        index_files="index.xhtml,index.html,index.htm,index.lp,index.lsp,index.lua,index.cgi,index.shtml,index.php"
        authentication_domain="mydomain.com"
        enable_auth_domain_check="false"
        ssl_certificate="/etc/vscp/certs/server.pem"
        ssl_certificate_chain=""
        ssl_verify_peer="false"
        ssl_ca_path=""
        ssl_ca_file=""
        ssl_verify_depth="9"
        ssl_default_verify_paths="true"
        ssl_cipher_list="DES-CBC3-SHA:AES128-SHA:AES128-GCM-SHA256"
        ssl_protocol_version="3"
        ssl_short_trust="false"
        cgi_interpreter=""
        cgi_patterns="**.cgi$|**.pl$|**.php|**.py"
        cgi_environment=""
        protect_uri=""
        trottle=""
        enable_directory_listing="true"
        enable_keep_alive="false"
        keep_alive_timeout_ms="0"
        access_control_list=""
        extra_mime_types=""
        num_threads="50"
        run_as_user="vscp"
        url_rewrite_patterns=""
        hilde_file_patterns=""
        request_timeout_ms="10000"
        linger_timeout_ms=""
        decode_url="true"
        global_auth_file=""
        per_directory_auth_file=""
        ssi_patterns=""
        access_control_allow_origin="*"
        access_control_allow_methods="*"
        access_control_allow_headers="*"
        error_pages=""
        tcp_nodelay="0"
        static_file_max_age="3600"
        strict_transport_security_max_age=""
        allow_sendfile_call="true"
        additional_header=""
        max_request_size="16384"
        allow_index_script_resource="false"
        duktape_script_patterns="**.ssjs$"
        lua_preload_file=""
        lua_script_patterns="**.lua$"
        lua_server_page_patterns="**.lp$|**.lsp$"
        lua_websocket_patterns="**.lua$"
        lua_background_script=""
        lua_background_script_params=""
     />

    <!--
      Enable disable the websocket interface.
      Id auth is set to false not authentication will be done
    -->
    <websockets enable="true" />

    <!--
      Holds information about one (at least) or more users
      Use vscp-mkpassword to generate a new password
      Privilege is "admin" or "user" or comma seperated list
      Same information is used for accessing the daemon
      through the TCP/IP interface as through the web-interface
    -->
    <remoteuser>
        <user name="user"
                password="D35967DEE4CFFB214124DFEEA7778BB0;582BCA078604C925852CDDEE0A8475556DEAA6DC6EFB004A353094900C97D3DE"
                privilege="user"
                allowfrom=""
                filter=""
                events=""
                fullname=""
                note=""
        />
    </remoteuser>

    <!-- 
        List level-I/CANAL drivers here 

        enable - Set to true to load driver.
        name - Set a name for the driver. Space in name will be
               traqnslated to '_'
        config - Level I/CANAL driver configuration string.
        flags  - Level I/CANAL driver configuration flags.
        translation - Bit field for incomming event translation
                      bit 1: Level 1 measurement events -> Level II measurement float events
                      bit 2: Level 1 measurement events -> Level II measurement string events
                      bit 3: All Level I events -> Level I over Level II events.
    -->
    <level1driver enable="true" >

        <!-- The canallog driver -->
        <driver enable="false"
                name="logger"
                config="/tmp/canallog.txt"
                flags="1"
                translation="0x02"
                path="/srv/vscp/drivers/level1/vscpl1drv-logger.so"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:01:00:00:00:00:00:00:01"
        />

        <!-- The can4vscp driver -->
        <driver enable="false"
                name="can4vscp"
                config="/dev/ttyUSB0"
                flags="0"
                translation="0x02"
                path="/srv/vscp/drivers/level1/vscpl1drv-can4vscp.so"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:01:00:00:00:00:00:00:02"
        />

        <!--
            The Level I socketcan driver (You may concider using the
            Level II version instead)
        -->
        <driver enable="false" 
                name="socketcanl1"
                config="vcan0"
                flags="0"
                translation="0x02"
                path="/srv/vscp/drivers/level1/vscpl1drv-socketcan.so"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:01:00:00:00:00:00:00:03"
        />

        <!-- The can232 driver -->
        <driver enable="false" 
                name="can232"
                config="/dev/ttyS0;19200;0;0;125"
                flags="0"
                translation="0x02"
                path="/srv/vscp/drivers/level1/vscpl1drv-can232.so"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:01:00:00:00:00:00:00:04"
        />

        <!-- The xap driver -->
        <driver enable="false" 
                name="xap"
                config="9598;3639"
                flags="0"
                translation="0x02"
                path="/srv/vscp/drivers/level1/vscpl1drv-xap.so"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:01:00:00:00:00:00:00:05"
        />

    </level1driver>

    <!-- 
        List level II VSCP drivers here 

        enable - Set to true to load driver.
        name - Set a name for the driver. Space in name will be
               traqnslated to '_'
        path-driver - Path to the driver dynamic link library file.
        path-config - Path to driver configuration file.
        guid - GUID for driver. Must be set to valid unique GUID.
    -->
    <level2driver enable="true">

        <!-- Level II Logger -->
        <driver enable="false"
                name="Logger"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-logger.so"
                path-config="/var/lib/vscp/vscpd/logger2.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:01"
        />

        <!-- Level II lmsensors -->
        <driver enable="false" 
                name="lmsensors"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-lmsensors.so"
                path-config="/var/lib/vscp/vscpd/lmsensors.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:02"
        />

        <!-- Level II socketcan  -->
        <driver enable="false" 
                name="socketcan"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-socketcan.so"
                path-config="/var/lib/vscp/vscpd/socketcan.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:03"
        />

        <!-- Level II mqtt -->
        <driver enable="false" 
                name="mqtt"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-mqtt.so"
                path-config="/var/lib/vscp/vscpd/mqtt.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:04"
        />

        <!-- Level II tcp/ip link -->
        <driver enable="false" 
                name="tcpiplink"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-tcpiplink.so"
                path-config="/var/lib/vscp/vscpd/tcpiplink.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:05"
        />

        <!-- Level II raw ethernet -->
        <driver enable="false"
                name="rawethernet"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-raweth.so"
                path-config="/var/lib/vscp/vscpd/raweth.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:06"                
        />

       <!-- Level II simulation -->
        <driver enable="true"
                name="sim"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-sim.so"
                path-config="/var/lib/vscp/vscpd/sim.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:07"
        />

        <!-- Level II 1-wire driver -->
        <driver enable="false"
                name="1-wire"
                path-driver="/srv/vscp/drivers/level2/vscpl2drv-wire1.so"
                path-config="/var/lib/vscp/vscpd/wire1.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:02:00:00:00:00:00:00:08"
        />

    </level2driver>

    <!-- 
        Level II drivers are standard executables that are startted by 
        the daemon with a standard set of arguments.
    -->
    <level3driver enable="false">
        <driver enable="false"
                name="vscp level3 test"
                path-driver="/usr/bin/l3test"
                path-config="/var/lib/vscp/vscpd/wire1.conf"
                guid="FF:FF:FF:FF:FF:FF:FF:F5:03:00:00:00:00:00:00:01"
        />
    </level3driver>

</vscpconfig>
